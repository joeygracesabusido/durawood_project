{% extends 'dashboard.html' %} {% block content %}

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- jQuery Core (this is required) -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

  <!-- jQuery UI (this provides autocomplete) -->
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" />
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
    crossorigin="anonymous"
  />
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"
  ></script>

  <style type="text/tailwindcss">
    @theme {
      --color-clifford: #da373d;
    }
  </style>
</head>

<div id="main" class="main">
  <div class="pagetitle"></div>
  <section class="section">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <div class="flex items-center justify-between pt-3">
            <h5 class="card-title m-0">Customer Transaction History</h5>
            <div class="space-x-2">
              <button id="printPDF" class="bg-sky-500 text-white py-2 px-4 rounded">Print</button>
              <button id="exportExcel" class="bg-yellow-300 text-gray-700 py-2 px-4 rounded">Excel</button>
            </div>
          </div>

          <!-- Report Header -->
          <div class="mt-4">
            <div class="flex items-start justify-between">
              <div>
                <h2 class="text-2xl font-semibold">Durawood Construction and Lumber Supply Inc.</h2>
                <div class="text-gray-600 leading-6">
                  <div>177 Durawood Bldg. Sumulong Highway</div>
                  <div>Cor. V Soliven Ave. Brgy., Mayamot Antipolo City</div>
                  <div>8645-3977</div>
                </div>
              </div>
              <div class="text-gray-500 flex items-center space-x-2">
                <label class="text-sm">From</label>
                <input type="date" id="dateFrom" class="border px-2 py-1 rounded" />
                <label class="text-sm">To</label>
                <input type="date" id="dateTo" class="border px-2 py-1 rounded" />
                <button id="applyFilter" class="bg-sky-500 text-white px-3 py-1 rounded">Search</button>
                <label class="text-sm inline-flex items-center ml-2">
                  <input type="checkbox" id="debitsOnly" class="mr-1" /> Debits only
                </label>
              </div>
            </div>

            <hr class="my-4" />
            <div class="grid grid-cols-2 gap-4">
              <div>
                <div class="text-lg font-semibold" id="customerName">Customer Name</div>
                <div class="text-gray-600" id="customerAddress">Manila, Philippines</div>
                <div class="text-gray-600" id="customerContact">Tel:</div>
              </div>
              <div class="text-right text-gray-500" id="dateRangeDisplay"></div>
            </div>
          </div>

          <!-- Transactions Table -->
          <div class="mt-4">
            <table id="table_sales" class="min-w-full table-auto border border-gray-300">
              <thead class="bg-gray-100 text-gray-700">
                <tr>
                  <th class="border px-3 py-2 text-left">Date</th>
                  <th class="border px-3 py-2 text-left">Invoice # / PO # / Payment Reference</th>
                  <th class="border px-3 py-2 text-right">Debit</th>
                  <th class="border px-3 py-2 text-right">Credit</th>
                  <th class="border px-3 py-2 text-right">Balance</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <!-- Totals -->
          <div class="mt-6 flex justify-end">
            <div class="text-right">
              <div class="text-cyan-600 font-semibold">
                Total Debit: <span id="totalDebit" class="ml-2">0.00</span>
              </div>
              <div class="text-emerald-600 font-semibold">
                Total Credit: <span id="totalCredit" class="ml-2">0.00</span>
              </div>
              <div class="text-rose-600 font-semibold">
                Remaining Balance: <span id="remainingBalance" class="ml-2">0.00</span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>
  <script src="/static/accounting/customer_transaction.js?v=2"></script>
</div>

{% endblock %}
